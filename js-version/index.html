<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catenary Calculator</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.plot.ly/plotly-2.11.1.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>Catenary Calculator</h1>

        <div class="calculator">
            <div class="input-section">
                <h2>Input Parameters</h2>

                <!-- Catenary Diagram -->
                <div class="diagram-container">
                    <svg width="800" height="500" viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                        <!-- Grid background -->
                        <defs>
                            <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">
                                <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#e0e0e0" stroke-width="0.5"/>
                            </pattern>
                        </defs>
                        <rect width="100%" height="100%" fill="url(#grid)" />

                        <!-- Pole A -->
                        <rect x="80" y="120" width="15" height="250" fill="#4CAF50" stroke="#2E7D32"/>
                        <text x="55" y="140" font-family="Arial" font-size="12" fill="#333">Quota Palo A</text>
                        <rect x="30" y="145" width="70" height="20" fill="#2196F3" stroke="#1976D2"/>
                        <text x="45" y="158" font-family="Arial" font-size="10" fill="white">15.8384</text>

                        <!-- Pole B -->
                        <rect x="705" y="120" width="15" height="250" fill="#4CAF50" stroke="#2E7D32"/>
                        <text x="680" y="140" font-family="Arial" font-size="12" fill="#333">Quota Palo B</text>
                        <rect x="660" y="145" width="70" height="20" fill="#2196F3" stroke="#1976D2"/>
                        <text x="675" y="158" font-family="Arial" font-size="10" fill="white">15.8384</text>

                        <!-- Catenary curve -->
                        <path d="M 95 200 Q 150 320 250 300 Q 350 280 450 300 Q 550 320 650 300 Q 700 280 712 200"
                              fill="none" stroke="#FF9800" stroke-width="3"/>

                        <!-- Distance Pali -->
                        <line x1="95" y1="180" x2="712" y2="180" stroke="#333" stroke-width="2"/>
                        <text x="350" y="170" font-family="Arial" font-size="12" fill="#333">Distanza Pali</text>
                        <rect x="350" y="175" width="70" height="20" fill="#2196F3" stroke="#1976D2"/>
                        <text x="365" y="188" font-family="Arial" font-size="10" fill="white">51.7638</text>

                        <!-- Quota Freccia -->
                        <line x1="400" y1="200" x2="400" y2="300" stroke="#FF5722" stroke-width="2" stroke-dasharray="5,5"/>
                        <text x="410" y="240" font-family="Arial" font-size="12" fill="#333">Quota Freccia</text>
                        <rect x="410" y="245" width="70" height="20" fill="#FF9800" stroke="#F57C00"/>
                        <text x="425" y="258" font-family="Arial" font-size="10" fill="white">12.4684</text>

                        <!-- Angle points and labels -->
                        <!-- Point A -->
                        <circle cx="95" cy="200" r="8" fill="#FF5722"/>
                        <text x="75" y="195" font-family="Arial" font-size="14" fill="#FF5722" font-weight="bold">A</text>

                        <!-- Point B -->
                        <circle cx="712" cy="200" r="8" fill="#FF5722"/>
                        <text x="720" y="195" font-family="Arial" font-size="14" fill="#FF5722" font-weight="bold">B</text>

                        <!-- Point C (middle/freccia) -->
                        <circle cx="400" cy="300" r="8" fill="#FF9800"/>
                        <text x="385" y="320" font-family="Arial" font-size="14" fill="#FF9800" font-weight="bold">C</text>

                        <!-- Angle Beta -->
                        <path d="M 70 300 L 95 200 L 150 250" fill="none" stroke="#4CAF50" stroke-width="2"/>
                        <text x="50" y="260" font-family="Arial" font-size="12" fill="#4CAF50">Beta</text>
                        <rect x="15" y="275" width="50" height="20" fill="#4CAF50" stroke="#2E7D32"/>
                        <text x="25" y="288" font-family="Arial" font-size="10" fill="white">83.3333</text>

                        <!-- Angle Gamma -->
                        <path d="M 650 250 L 712 200 L 730 300" fill="none" stroke="#4CAF50" stroke-width="2"/>
                        <text x="720" y="260" font-family="Arial" font-size="12" fill="#4CAF50">Gamma</text>
                        <rect x="735" y="275" width="50" height="20" fill="#4CAF50" stroke="#2E7D32"/>
                        <text x="745" y="288" font-family="Arial" font-size="10" fill="white">83.3333</text>

                        <!-- Angle Alfa -->
                        <path d="M 350 350 L 400 300 L 450 350" fill="none" stroke="#9C27B0" stroke-width="2"/>
                        <text x="385" y="375" font-family="Arial" font-size="12" fill="#9C27B0">Alfa</text>

                        <!-- Distance PA -->
                        <text x="50" y="400" font-family="Arial" font-size="12" fill="#333">Distanza PA</text>
                        <rect x="50" y="405" width="70" height="20" fill="#2196F3" stroke="#1976D2"/>
                        <text x="65" y="418" font-family="Arial" font-size="10" fill="white">100.0000</text>

                        <!-- Distance PB -->
                        <text x="680" y="400" font-family="Arial" font-size="12" fill="#333">Distanza PB</text>
                        <rect x="680" y="405" width="70" height="20" fill="#2196F3" stroke="#1976D2"/>
                        <text x="695" y="418" font-family="Arial" font-size="10" fill="white">100.0000</text>

                        <!-- Additional angle labels -->
                        <text x="50" y="450" font-family="Arial" font-size="12" fill="#333">Angolo V a</text>
                        <rect x="50" y="455" width="70" height="20" fill="#2196F3" stroke="#1976D2"/>
                        <text x="65" y="468" font-family="Arial" font-size="10" fill="white">90.0000</text>

                        <text x="680" y="450" font-family="Arial" font-size="12" fill="#333">Angolo V b</text>
                        <rect x="680" y="455" width="70" height="20" fill="#2196F3" stroke="#1976D2"/>
                        <text x="695" y="468" font-family="Arial" font-size="10" fill="white">90.0000</text>

                        <!-- Reference point P -->
                        <circle cx="400" cy="450" r="6" fill="#FF9800"/>
                        <text x="390" y="440" font-family="Arial" font-size="12" fill="#FF9800" font-weight="bold">P</text>

                        <!-- Angle lines from P -->
                        <line x1="400" y1="450" x2="95" y2="200" stroke="#FF9800" stroke-width="1" stroke-dasharray="3,3"/>
                        <line x1="400" y1="450" x2="712" y2="200" stroke="#FF9800" stroke-width="1" stroke-dasharray="3,3"/>

                        <!-- Angle Hz a -->
                        <text x="250" y="430" font-family="Arial" font-size="12" fill="#333">Angolo Hz a</text>
                        <rect x="250" y="435" width="70" height="20" fill="#2196F3" stroke="#1976D2"/>
                        <text x="265" y="448" font-family="Arial" font-size="10" fill="white">33.3333</text>

                        <!-- Angle Hz b -->
                        <text x="480" y="430" font-family="Arial" font-size="12" fill="#333">Angolo Hz b</text>
                        <rect x="480" y="435" width="70" height="20" fill="#2196F3" stroke="#1976D2"/>
                        <text x="495" y="448" font-family="Arial" font-size="10" fill="white">16.6667</text>
                    </svg>
                </div>

                <form id="catenary-form">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="temperature">Temperature (°C)</label>
                            <input type="number" id="temperature" value="7.0" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="elevation_difference">Elevation Difference (m)</label>
                            <input type="number" id="elevation_difference" value="-2.5" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="span_length">Span Length (m)</label>
                            <input type="number" id="span_length" value="389.50" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="angle_hsx">Angle Hsx (°)</label>
                            <input type="number" id="angle_hsx" value="0.100" step="0.001">
                        </div>
                        <div class="form-group">
                            <label for="angle_vsx">Angle Vsx (°)</label>
                            <input type="number" id="angle_vsx" value="94.0580" step="0.0001">
                        </div>
                        <div class="form-group">
                            <label for="angle_h1">Angle H1 (°)</label>
                            <input type="number" id="angle_h1" value="30.0380" step="0.0001">
                        </div>
                        <div class="form-group">
                            <label for="angle_v1">Angle V1 (°)</label>
                            <input type="number" id="angle_v1" value="93.8710" step="0.0001">
                        </div>
                        <div class="form-group">
                            <label for="angle_h2">Angle H2 (°)</label>
                            <input type="number" id="angle_h2" value="63.9710" step="0.0001">
                        </div>
                        <div class="form-group">
                            <label for="angle_v2">Angle V2 (°)</label>
                            <input type="number" id="angle_v2" value="92.7080" step="0.0001">
                        </div>
                        <div class="form-group">
                            <label for="angle_h3">Angle H3 (°)</label>
                            <input type="number" id="angle_h3" value="90.8010" step="0.0001">
                        </div>
                        <div class="form-group">
                            <label for="angle_v3">Angle V3 (°)</label>
                            <input type="number" id="angle_v3" value="91.9070" step="0.0001">
                        </div>
                        <div class="form-group">
                            <label for="angle_hd">Angle Hdx (°)</label>
                            <input type="number" id="angle_hd" value="121.8410" step="0.0001">
                        </div>
                        <div class="form-group">
                            <label for="angle_vd">Angle Vdx (°)</label>
                            <input type="number" id="angle_vd" value="90.4640" step="0.0001">
                        </div>
                        <div class="form-group">
                            <label for="freccia_tab">Freccia Tab</label>
                            <input type="number" id="freccia_tab" value="13.5000" step="0.0001">
                        </div>
                    </div>
                    <button type="submit">Calculate</button>
                    <button type="button" id="use-defaults">Use Default Values</button>
                </form>
            </div>

            <div class="results-section">
                <h2>Results</h2>
                <div id="results">
                    <div class="result-item">
                        <h3>A) VISTA 1-2</h3>
                        <p>Param: <span id="param12"></span></p>
                        <p>Arrow: <span id="arrow1"></span></p>
                    </div>
                    <div class="result-item">
                        <h3>B) VISTA 2-3</h3>
                        <p>Param: <span id="param23"></span></p>
                        <p>Arrow: <span id="arrow3"></span></p>
                    </div>
                    <div class="result-item">
                        <h3>C) VISTA 1-3</h3>
                        <p>Param: <span id="param13"></span></p>
                        <p>Arrow: <span id="arrow2"></span></p>
                    </div>
                    <div class="result-item summary">
                        <h3>MEDIA</h3>
                        <p>Param: <span id="media_param"></span></p>
                        <p>Arrow: <span id="media_arrow"></span></p>
                    </div>
                    <div class="result-item final-result">
                        <h3>RESULT</h3>
                        <p>Freccia Tab: <span id="res_freccia_tab"></span></p>
                        <p>Delta: <span id="delta"></span></p>
                        <p>Delta %: <span id="delta_percent"></span></p>
                        <p>Error: <span id="error"></span></p>
                    </div>
                    <div class="result-item pole-result">
                        <h3>POLES</h3>
                        <p>Pole 1 Position (X, Z): <span id="pole1_pos"></span></p>
                        <p>Pole 2 Position (X, Z): <span id="pole2_pos"></span></p>
                    </div>
                </div>
            </div>
        </div>

        <div class="graph-section">
            <h2>3D Graph</h2>
            <div id="plot"></div>
        </div>

    </div>

    <script src="script.js"></script>
</body>
</html>
